<!-- src/app/pages/admin/pages/admin/add-quiz/add-quiz.html -->

<div class="add-quiz-container">
  <mat-card class="add-quiz-card content-card">
    <mat-card-header class="text-center">
      <mat-card-title class="card-title">Add New Quiz</mat-card-title>
      <mat-card-subtitle class="text-center">
        Fill in the details to create a new quiz.
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content class="card-content">
      <!-- FIX 1: Change formSubmit() to addQuiz() -->
      <form class="quiz-form" (ngSubmit)="addQuiz()">
        <!-- Quiz Title -->
        <mat-form-field class="full-width" appearance="outline">
          <mat-label>Quiz Title</mat-label>
          <input
            matInput
            placeholder="Enter quiz title"
            name="title"
            [(ngModel)]="quizData.title" 
            required
          />
        </mat-form-field>

        <!-- Quiz Description -->
        <mat-form-field class="full-width" appearance="outline">
          <mat-label>Quiz Description</mat-label>
          <textarea
            matInput
            placeholder="Enter quiz description"
            rows="5"
            name="description"
            [(ngModel)]="quizData.description" 
          ></textarea>
        </mat-form-field>

        <!-- Max Marks and Number of Questions -->
        <div class="row-fields">
          <mat-form-field class="flex-field" appearance="outline">
            <mat-label>Max Marks</mat-label>
            <input
              matInput
              type="number"
              placeholder="Enter max marks"
              name="maxMarks"
              [(ngModel)]="quizData.maxMarks" 
              required
            />
          </mat-form-field>
          <mat-form-field class="flex-field" appearance="outline">
            <mat-label>Number of Questions</mat-label>
            <input
              matInput
              type="number"
              placeholder="Enter number of questions"
              name="numberOfQuestions"
              [(ngModel)]="quizData.numberOfQuestions" 
              required
            />
          </mat-form-field>
        </div>

        <!-- Active Status Toggle -->
        <mat-slide-toggle
          name="active"
          [(ngModel)]="quizData.active" 
          color="primary"
          class="toggle-active"
        >
          Active Status
        </mat-slide-toggle>

        <!-- Category Dropdown -->
        <mat-form-field class="full-width" appearance="outline">
          <mat-label>Select Category</mat-label>
          <mat-select name="category" [(ngModel)]="quizData.category" required> <!-- FIX 2: Change quiz.category to quizData.category -->
            <mat-option *ngFor="let c of categories" [value]="c">
              {{ c.title }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Submit Button -->
        <div class="button-container">
          <button mat-raised-button color="primary" type="submit">Add Quiz</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
