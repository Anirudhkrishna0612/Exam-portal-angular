<!-- src/app/pages/profile/profile.html -->

<mat-card class="profile-main-card">
  <h1>Your Profile</h1>
  <mat-card-content>
    <div class="bootstrap-wrapper">
      <div class="container">
        <!-- Profile picture and name section -->
        <div class="text-center profile-header-section">
          <img src="https://www.pngall.com/wp-content/uploads/5/Profile-Male-PNG.png" alt="" class="pfpimg">
          <h2>{{ user?.firstName }} {{ user?.lastName }}</h2>
          <p>{{ user?.username }}</p>
        </div>

        <div class="row profile-details-row">
          <div class="col-md-10 offset-md-1">
            <h3 class="table-title">Account Details</h3>
            <!-- **CRITICAL FIX: Use 'table' class here** -->
            <table class="table details-table" *ngIf="user">
              <tr>
                <td><b>ID</b></td>
                <td class="text-white">{{ user.id }}</td> <!-- Apply text-white if needed -->
              </tr>
              <tr>
                <td><b>Username</b></td>
                <td class="text-white">{{ user.username }}</td>
              </tr>
              <tr>
                <td><b>First Name</b></td>
                <td class="text-white">{{ user.firstName }}</td>
              </tr>
              <tr>
                <td><b>Last Name</b></td>
                <td class="text-white">{{ user.lastName }}</td>
              </tr>
              <tr>
                <td><b>Email</b></td>
                <td class="text-white">{{ user.email }}</td>
              </tr>
              <tr>
                <td><b>Phone</b></td>
                <td class="text-white">{{ user.phone }}</td>
              </tr>
              <tr>
                <td><b>Status</b></td>
                <td class="text-white">
                  <span [style.color]="user.enabled ? '#4CAF50' : '#F44336'">
                    {{ user.enabled ? 'Active' : 'Disabled' }}
                  </span>
                </td>
              </tr>
              <tr>
                <td><b>Profile Image File</b></td>
                <td class="text-white">{{ user.profile || 'N/A' }}</td>
              </tr>
              <tr>
                <td><b>Role</b></td>
                <td class="text-white">{{ getRoleString(user.authorities) }}</td>
              </tr>
            </table>
            <div *ngIf="!user" class="no-data-message text-center">
              User details could not be loaded.
            </div>
          </div>
        </div>
      </div>
    </div>
  </mat-card-content>

  <mat-card-actions class="card-buttons-center">
    <button mat-stroked-button color="accent" (click)="editProfile()">Edit</button>
    <button mat-stroked-button color="warn">Delete</button>
  </mat-card-actions>
</mat-card>
