<!-- src/app/pages/profile/profile.html -->

<div class="bootstrap-wrapper">
    <div class="container mt20" *ngIf="user">
        <mat-card>
            <div class="text-center">
                <img src="https://placehold.co/150x150/673AB7/white?text=User" alt="Profile Image" class="profile-img">
                <h1>{{ user.firstName }} {{ user.lastName }}</h1>
                <p>Welcome to your profile!</p>
            </div>

            <!-- User Details List -->
            <mat-list>
                <mat-list-item>
                    <mat-icon matListItemIcon>account_circle</mat-icon>
                    <span matListItemTitle>Username:</span>
                    <span matListItemLine>{{ user.username }}</span>
                </mat-list-item>
                <mat-divider></mat-divider>

                <mat-list-item>
                    <mat-icon matListItemIcon>badge</mat-icon>
                    <span matListItemTitle>User ID:</span>
                    <span matListItemLine>{{ user.id }}</span>
                </mat-list-item>
                <mat-divider></mat-divider>

                <mat-list-item>
                    <mat-icon matListItemIcon>email</mat-icon>
                    <span matListItemTitle>Email:</span>
                    <span matListItemLine>{{ user.email }}</span>
                </mat-list-item>
                <mat-divider></mat-divider>

                <mat-list-item>
                    <mat-icon matListItemIcon>call</mat-icon>
                    <span matListItemTitle>Phone:</span>
                    <span matListItemLine>{{ user.phone }}</span>
                </mat-list-item>
                <mat-divider></mat-divider>

                <mat-list-item>
                    <mat-icon matListItemIcon>check_circle</mat-icon>
                    <span matListItemTitle>Status:</span>
                    <span matListItemLine>{{ user.enabled ? 'Active' : 'Inactive' }}</span>
                </mat-list-item>
                <mat-divider></mat-divider>

                <mat-list-item>
                    <mat-icon matListItemIcon>verified_user</mat-icon>
                    <span matListItemTitle>Roles:</span>
                    <span matListItemLine *ngIf="user.authorities && user.authorities.length > 0">
                        <span *ngFor="let auth of user.authorities; last as isLast">
                            {{ auth.authority }}<span *ngIf="!isLast">, </span>
                        </span>
                    </span>
                    <span matListItemLine *ngIf="!user.authorities || user.authorities.length === 0">No roles assigned</span>
                </mat-list-item>
            </mat-list>

            <div class="text-center mt20">
                <button mat-raised-button color="primary">Update Profile</button>
                <button mat-raised-button color="warn" class="ml10">Change Password</button>
            </div>
        </mat-card>
    </div>
    <div class="container mt20" *ngIf="!user">
        <mat-card>
            <p class="text-center">Loading user data or user not found...</p>
        </mat-card>
    </div>
</div>
